# 更新日志

## [未发布] - 2024-12-22

### 🚀 新增功能
- 添加了测试脚本 `test_select_course.py` 用于验证选课功能
- 创建了多个Windows启动脚本选项（`quick_start.bat`, `run_windows.bat`）

### 🔧 修复问题
- **选课验证码处理重大改进**：
  - 支持弹窗页面中的验证码处理
  - 增强了iframe内验证码的识别和处理
  - 优化了验证码图片获取逻辑，支持多种页面结构
  - 改进了验证码输入框的查找策略

- **选课流程优化**：
  - 根据实际HTML页面结构更新了选择器
  - 增强了提交按钮的查找和点击逻辑
  - 支持多种提交方式（表单提交、回车键、JavaScript调用）
  - 改进了选课结果的判断机制

- **Windows兼容性修复**：
  - 修复了批处理脚本中的变量扩展问题
  - 添加了 `setlocal enabledelayedexpansion` 支持
  - 提供了多种启动脚本选项

### 🏗️ 技术改进
- **BrowserAgent类增强**：
  - 重构了 `select_course` 方法的验证码处理逻辑
  - 优化了 `get_captcha_image` 方法，支持多种页面类型
  - 增加了更详细的调试输出和错误处理

- **验证码识别增强**：
  - 改进了验证码图片的预处理流程
  - 增强了手动输入的用户体验
  - 添加了更多的图片选择器支持

### 📝 文档更新
- 更新了README.md，添加了新的常见问题解答
- 新增了选课功能测试的说明
- 添加了Windows系统特定问题的解决方案

### 🐛 已知问题
- 某些特殊情况下可能仍需要手动输入验证码
- 网络环境不稳定时可能影响选课成功率

---

## 历史版本

如需查看完整的版本历史，请参考项目的Git提交记录。 